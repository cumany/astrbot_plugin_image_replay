# AstrBot 图片回复插件 (image_replay)

一个支持自定义表情、图片管理与批量发送的 AstrBot 插件，解决表情制作与管理困难的问题。
此插件是根据menu插件改进而来
https://github.com/Futureppo/astrbot_plugin_custom_menu/
## 功能特点

- 支持关键词触发图片回复
- 可收集/添加自定义图片作为回复资源
- 支持随机发送或批量发送图片
- 提供图片管理功能（查看、删除）
- 支持黑白名单权限控制

## 安装方法

1. 将插件代码放入 AstrBot 插件目录
2. 启动机器人后，插件会自动创建所需的资源目录
3. 资源目录位置：`AstrBot 数据目录/astrbot_plugin_image_replay/resource`

## 使用指南

### 1. 基础回复功能

当发送包含已配置关键词的消息时，机器人会自动回复匹配的图片：
```
<关键词>
```
例如：配置了"可爱表情"关键词后，发送"可爱表情"会触发回复

### 2. 图片收集/添加

通过命令收集图片（需先引用包含图片的消息）：
```
收集 <关键词>
添加图片 <关键词>
添加表情 <关键词>
```
示例：
```
收集 可爱表情
```
- 会将引用消息中的图片保存到资源目录
- 自动将关键词添加到可用命令列表
- 支持同时收集多张图片

### 3. 查看图片

查看所有已收集的图片：
```
查看图片
```

### 4. 删除图片

删除指定关键词的图片：
```
# 删除最近添加的一张图片
删除图片指令 <关键词>

# 删除所有匹配的图片
删除图片指令 <关键词> ALL
```
示例：
```
删除图片指令 可爱表情
删除图片指令 可爱表情 ALL
```

## 配置说明

插件支持通过配置文件进行以下设置：

- `commands`: 可用的图片回复关键词列表（自动维护，无需手动修改）
- `multi_reply_mode`: 多图回复模式
  - `random`: 随机发送一张（默认）
  - `all`: 发送所有匹配图片
- `require_wake`: 是否需要@机器人或唤醒词触发（默认：True）
- `group_whitelist`: 允许使用的群组白名单
- `group_blacklist`: 禁止使用的群组黑名单
- `user_whitelist`: 允许使用的用户白名单
- `user_blacklist`: 禁止使用的用户黑名单

## 注意事项

- 支持的图片格式：.jpg, .jpeg, .png, .gif, .bmp, .webp
- 收集图片时会自动过滤文件名中的特殊字符
- 管理员权限才能使用删除命令
- 图片文件会保存在资源目录，按"关键词-随机数.扩展名"格式命名

## 版本历史

- v1.0.0: 初始版本，支持图片收集、回复、查看和删除功能

## 开源地址

https://github.com/cumany/astrbot_plugin_image_replay

